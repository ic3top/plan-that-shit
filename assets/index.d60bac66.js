var W=Object.defineProperty,G=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var $=(t,s,n)=>s in t?W(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,C=(t,s)=>{for(var n in s||(s={}))L.call(s,n)&&$(t,n,s[n]);if(S)for(var n of S(s))F.call(s,n)&&$(t,n,s[n]);return t},I=(t,s)=>G(t,Y(s));var B=(t,s)=>{var n={};for(var r in t)L.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&S)for(var r of S(t))s.indexOf(r)<0&&F.call(t,r)&&(n[r]=t[r]);return n};import{r as c,a as K,j as E,c as k,R as V,u as z,I as A,b as Q,t as N,d as X,e as Z,B as ee,f as te,A as re,n as ne,l as se,G as ae,g as oe,M as le,h as ie,i as ce,k as de,L as ue,m as me,o as he,T as pe,p as fe,q as O,s as xe,v as ge}from"./vendor.de461438.js";const be=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};be();const ve=(t,s={})=>{const[n,r]=c.exports.useState({data:null,error:null,isLoading:!1}),a=c.exports.useCallback(()=>{r(o=>I(C({},o),{isLoading:!0})),K.post(t,s).then(o=>{r({data:o.data,isLoading:!1,error:null})}).catch(o=>{r({data:null,isLoading:!1,error:o})})},[t,s]);return[n,a]},e=E.exports.jsx,l=E.exports.jsxs,w=E.exports.Fragment;function x(d){var u=d,{onClick:t,children:s,outline:n,base:r,className:a,disabled:o,withIcon:i,bordered:m}=u,f=B(u,["onClick","children","outline","base","className","disabled","withIcon","bordered"]);const b=k("px-10 py-2 font-medium border-2 tracking-wider duration-150",{"text-white hover:shadow-lg border-blue-400 bg-blue-400 drop-shadow-md rounded":r,"bg-transparent border-transparent drop-shadow-none text-blue-400 hover:text-blue-600":n,"flex justify-center items-center gap-2":i,"border-blue-400 border-2 rounded text-blue-400 font-bold mt-6 hover:text-blue-500 hover:border-blue-500":m});return e("button",I(C({},f),{onClick:t,className:`${b} ${a}`,disabled:o,children:s}))}function D({className:t}){return e("div",{className:`${t} flex justify-center`,children:e("div",{className:"dot-elastic"})})}function y({isOpen:t,actions:s,title:n,message:r,content:a}){return e("div",{children:l(V,{isOpen:t,htmlOpenClassName:"overflow-y-hidden",contentLabel:"New room created",className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md fixed bottom-1/2 right-1/2 translate-y-1/2 translate-x-1/2 max-w-[500px]",overlayClassName:"fixed top-0 bottom-0 right-0 left-0 bg-gray-200 bg-gray-200/[.7]",children:[l("div",{className:"px-4",children:[n&&e("h2",{className:"text-2xl font-bold text-gray-700 mt-2",children:n}),r&&e("p",{className:"mt-4 text-lg text-gray-500",children:r})]}),a,e("div",{className:"bg-gray-300 h-px mt-6"}),e("div",{className:"flex justify-end",children:s})]})})}function Ne({isOpen:t,setIsShown:s,roomId:n,loading:r}){const a=z(),o=`${window.location.origin}/plan-that-shit/${n}`;return e(y,{isOpen:t,title:"Room created!",message:"Your room link created, now send it to all of your team members to invite them. Also, you might want to save it for the future.",content:r?e(D,{className:"mt-6 py-2"}):l("div",{className:"relative mt-6",onClick:()=>{N.promise(navigator.clipboard.writeText(o),{pending:"Coping...",success:"Copied to clipboard \u{1F44C}",error:"Rejected \u{1F92F}"})},children:[e("div",{className:"py-2 pl-4 pr-8 bg-blue-50 hover:bg-blue-100 text-lg cursor-read overflow-x-auto whitespace-nowrap",children:o}),e("button",{"aria-label":"copy to clipboard",className:"absolute right-2 top-3",children:e(Q,{size:22})})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>s(!1),children:"CANCEL"}),l(x,{withIcon:!0,outline:!0,onClick:()=>a(`/${n}`),disabled:r,children:["JOIN",e(A,{size:24})]})]})})}const we="qwertyuiopasdfghjklzxcvbnm",ye=X(we,12),Se=()=>ye().match(/.{1,3}/g).join("-");var p="/plan-that-shit/assets/card.f711e6a7.svg";function Ce(){return e("div",{className:"v-area",children:l("ul",{className:"v-circles",children:[e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})}),e("li",{children:e("img",{src:p,alt:"card"})})]})})}function Ie({value:t,onChange:s}){return e(Z,{mask:"aaa-aaa-aaa-aaa",value:t,onChange:s,placeholder:"xxx-xxx-xxx-xxx",children:n=>e("input",I(C({},n),{id:"roomId",className:"w-80 pt-2 pl-1 pr-4 rounded-sm border-b-2 text-lg focus:border-blue-400"}))})}function Re(){var m;const t=z(),[s,n]=c.exports.useState(!1),[r,a]=c.exports.useState(""),[o,i]=ve(`https://planning-poker-1479.herokuapp.com/api/room/${Se()}`);return l(w,{children:[l("div",{children:[e(Ne,{isOpen:s,setIsShown:n,roomId:(m=o==null?void 0:o.data)==null?void 0:m.roomId,loading:o.isLoading}),l("div",{className:"mt-16 pl-12 flex flex-col justify-between",style:{height:"75vh"},children:[l("div",{children:[l("ul",{children:[l("li",{className:"text-3xl font-medium flex items-center gap-4",children:[e(ee,{color:"#2196F3",size:30}),"Play online anywhere with your team"]}),l("li",{className:"text-3xl font-medium mt-8 flex items-center gap-4",children:[e(te,{color:"#2196F3",size:30}),"Set up room in Seconds"]}),l("li",{className:"text-3xl font-medium mt-8 flex items-center gap-4",children:[e(re,{color:"#2196F3",size:30}),"Estimate as an Expert"]})]}),e(x,{base:!0,className:"w-80 mt-8 ml-8 text-xl",onClick:()=>{i(),n(!0)},children:"Create New Room"})]}),l("div",{className:"flex flex-col ml-8 mt-20",children:[e("label",{htmlFor:"roomId",className:"text-sm text-gray-500",children:"Already have a room?"}),e(Ie,{value:r,onChange:f=>a(f.target.value)}),l(x,{withIcon:!0,base:!0,className:"w-80 mt-2 text-xl",onClick:()=>t(`/${r}`),children:["Join",e(A,{size:24})]})]})]})]}),e(Ce,{})]})}const Ee="notification",ke="users",Ae="connection",Oe="estimation:done",Me="error",Te="exception",je="room",Le="join",Fe="estimate",$e="reveal",Be="start",R={JOIN:Le,ESTIMATE:Fe,REVEAL:$e,START:Be},M={NOTIFICATION:Ee,USERS:ke,ROOM:je,ESTIMATION_DONE:Oe,CONNECTION:Ae,ERROR:Me,EXCEPTION:Te};function P({t,title:s,description:n}){return l("div",{className:`${t.visible?"animate-enter":"animate-leave"} max-w-md w-full bg-white shadow-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`,children:[e("div",{className:"flex-1 w-0 p-4",children:e("div",{className:"flex items-start",children:l("div",{className:"ml-3 flex-1",children:[e("p",{className:"text-lg font-medium text-gray-900",children:s}),e("p",{className:"mt-1 text-sm text-gray-500",children:n})]})})}),e("div",{className:"flex border-l border-gray-200",children:e("button",{onClick:()=>N.dismiss(t.id),className:"w-full rounded-none p-4 flex items-center justify-center text-sm font-medium text-blue-600 hover:bg-gray-100 focus:outline-none",children:"Close"})})]})}const Ve="https://planning-poker-1479.herokuapp.com",ze=(t,s)=>{const[n,r]=c.exports.useState([]),[a,o]=c.exports.useState([]),[i,m]=c.exports.useState({}),[f]=c.exports.useState(ne(8)),d=c.exports.useRef(null);c.exports.useEffect(()=>{if(!(!s||!t))return d.current=se(Ve,{transports:["websocket"],query:{roomId:t,username:s,userId:f}}),d.current.on(M.ROOM,h=>{var g;m(h),o(((g=h.currentEstimation)==null?void 0:g.votes)||[])}),d.current.on(M.NOTIFICATION,h=>{N.custom(g=>e(P,{t:g,title:h.title,description:h.description}))}),d.current.on(M.USERS,r),d.current.emit(R.JOIN,{username:s,userId:f}),N.custom(h=>e(P,{t:h,title:"Connected",description:l(w,{children:["Connected to",e("span",{className:"tracking-wider font-medium p-1",children:t}),". Happy planning \u{1F389}"]})})),()=>{d.current.disconnect()}},[t,s]);const u=h=>{d.current.emit(R.ESTIMATE,{points:h,userId:f})},b=()=>{d.current.emit(R.REVEAL,{votes:a,storyName:d.current.storyName})},v=(h="Story name...")=>{d.current.emit(R.START,{storyName:h}),d.current.storyName=h};return{users:n,votes:a,isVoting:i.estimationInProgress,room:i,performEstimation:u,reveal:b,startVoting:v}};function q({children:t,onClick:s,dashed:n,selected:r}){const a=k("planning-card",{"planning-card_dashed":n,"planning-card_selected":r});return e("button",{onClick:s,className:a,children:t})}const De=t=>t>0&&t<100;function Pe({isOpen:t,setIsOpen:s,onSave:n}){const[r,a]=c.exports.useState("");return e(y,{isOpen:t,title:"Create new planning card",message:"You will be able to to use that card after saving to estimate stories in the future.",content:l("form",{id:"points-form",onSubmit:i=>{i.preventDefault(),n(r),a("")},children:[e("div",{className:"px-4 mt-4 flex items-center justify-center h-44 w-36 rounded bg-blue-400 mr-auto ml-auto shadow-md",children:e("input",{value:r,onChange:i=>a(i.target.value),id:"points",type:"number",max:100,min:0,className:"w-full text-8xl font-medium bg-blue-400 text-white"})}),e("label",{htmlFor:"points",className:"text-gray-400 font-semibold block text-center mt-1",children:"Input integer between 0 and 100"})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>s(!1),children:"CANCEL"}),l(x,{type:"submit",form:"points-form",withIcon:!0,outline:!0,disabled:!De(r),children:["SAVE",e(ae,{size:24})]})]})})}const J=(t,s)=>{const[n,r]=c.exports.useState(()=>{const a=localStorage.getItem(t);return a?JSON.parse(a):s});return c.exports.useEffect(()=>{const a=JSON.stringify(n);localStorage.setItem(t,a)},[n]),[n,r]},T=[0,1,2,3,5,8,13];function qe({isVoting:t,estimate:s}){const[n,r]=J("planning-cards",T),[a,o]=c.exports.useState(!1),[i,m]=c.exports.useState(null),f=u=>{if(t){s(u),m(u);return}N.error("Wait till voting begin")};return c.exports.useEffect(()=>{m(null)},[t]),l("div",{className:"mt-4",children:[e(Pe,{isOpen:a,setIsOpen:o,onSave:u=>(o(!1),n.includes(Number(u))?N.error(`Card with ${u} already exists`):(r(b=>{const v=[...b,Number(u)];return v.sort((h,g)=>h-g),v}),N.success(`Card with ${u} was added`)))}),e("h2",{className:"text-left font-semibold text-xl text-gray-600",children:t?"Choose your card...":"Wait till voting begins"}),l("div",{className:"flex gap-5 mt-2 flex-wrap",children:[Array.from(n).map(u=>e(q,{selected:u===i,onClick:()=>f(u),children:e("span",{className:"text-white text-4xl font-medium",children:u})},u)),e(q,{onClick:()=>o(!0),dashed:!0,children:e("span",{className:"text-blue-400 text-7xl font-medium pb-3",children:"+"})})]}),T.length!==n.length&&l(x,{onClick:()=>r(T),withIcon:!0,bordered:!0,children:["Refresh cards"," ",e(oe,{size:24})]})]})}function Je({name:t,votes:s,isVoting:n}){const r=s.find(({user:o})=>o===t),a=k("border-4 w-full rounded-md border-blue-400 h-full flex items-center justify-center",{"bg-blue-400":r&&n,"bg-blue-400 text-3xl text-white font-bold":!n});return l("div",{className:"flex flex-col justify-center items-center",children:[l("div",{className:a,children:[n&&r&&e(le,{color:"white",size:80}),n&&!r&&e(D,{}),!n&&r&&r.points,!n&&!r&&"?"]}),e("span",{className:"user-name",children:t})]})}function Ue({users:t,votes:s,isVoting:n,storyName:r}){return l("div",{className:"app-board",children:[e("div",{className:"app-story-block bg-blue-400 rounded-md text-white font-bold text-3xl flex items-center justify-center p-2",children:e("h2",{children:r||"Start voting"})}),t.map(({name:a,id:o})=>e(Je,{name:a,isVoting:n,votes:s},o))]})}const U=t=>/[`@#$%^&*()+\-=\[\]{};':"\\|<>\/~]/.test(t);function _e({isOpen:t,setIsOpen:s,setUsername:n}){const[r,a]=J("username"," "),[o,i]=c.exports.useState("");return e(y,{isOpen:t,title:"What's your name?",message:"This name will be shown for all people in the room that you are trying to join. It is required.",content:l("div",{className:"flex flex-col items-center",children:[e("form",{id:"username-form",onSubmit:d=>{if(d.preventDefault(),!r)return i("Name is required.");if(r.length<3)return i("At least 4 characters.");if(r.length>15)return i("No more than 15 characters allowed.");if(U(r))return i("Special characters are not allowed, use only letters and/or numbers.");n(r),s(!1)},children:e("input",{className:`w-80 mt-4 rounded-sm border-b-2 text-lg${o?" border-red-400":" focus:border-blue-400"}`,type:"text",value:r,onChange:d=>a(d.target.value),placeholder:"MyName..."})}),e("span",{className:"text-sm text-red-400",children:o})]}),actions:l(x,{type:"submit",form:"username-form",autoFocus:!0,withIcon:!0,base:!0,className:"w-full rounded-none rounded-b-lg hover:text-gray-200 text-xl",children:["Join",e(A,{size:24})]})})}function He({isOpen:t,setIsOpen:s,startVoting:n}){const[r,a]=c.exports.useState(""),[o,i]=c.exports.useState("");return e(y,{isOpen:t,title:"Story name",message:"Provide the next story name to vote for.",content:l("div",{className:"flex flex-col items-center py-4 px-16",children:[e("form",{id:"name-form",onSubmit:d=>{if(d.preventDefault(),!r)return i("Name is required.");if(r.length<3)return i("At least 4 characters.");if(r.length>50)return i("No more than 50 characters allowed.");if(U(r))return i("Special characters are not allowed, use only letters and/or numbers.");n(r),a(""),s(!1)},children:e("input",{className:`w-80 mt-4 rounded-sm border-b-2 text-lg${o?" border-red-400":" focus:border-blue-400"}`,type:"text",value:r,onChange:d=>a(d.target.value),placeholder:"Story Name..."})}),e("span",{className:"text-sm text-red-400",children:o})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>s(!1),children:"Cancel"}),e(x,{type:"submit",form:"name-form",withIcon:!0,outline:!0,children:"Start Voting"})]})})}function We({reveal:t,startVoting:s,isVoting:n}){const[r,a]=c.exports.useState(!1);return l(w,{children:[e(He,{isOpen:r,setIsOpen:a,startVoting:s}),n?e(x,{bordered:!0,onClick:t,className:"w-1/2 mx-auto",children:"REVEAL"}):e(x,{bordered:!0,onClick:()=>a(!0),className:"w-1/2 mx-auto",children:"Start Voting"})]})}function Ge({isOpen:t,setIsOpen:s,reveal:n}){return e(y,{isOpen:t,title:l("span",{className:"flex items-center gap-2 text-yellow-500",children:[e(ie,{size:28})," ","Not everyone voted"]}),message:"Be aware, not everyone voted. Their estimates will not be taken into account and will be represented as '?' - question mark.",actions:l(w,{children:[e(x,{outline:!0,onClick:()=>s(!1),children:"Cancel"}),e(x,{outline:!0,onClick:()=>{s(!1),n()},children:"Reveal anyway"})]})})}function Ye(){var j;const{roomId:t}=ce(),[s,n]=c.exports.useState(!0),[r,a]=c.exports.useState(!1),[o,i]=c.exports.useState(""),{room:m,users:f,votes:d,isVoting:u,performEstimation:b,reveal:v,startVoting:h}=ze(t,o),g=()=>f.every(({name:_})=>d.some(H=>H.user===_))?v():a(!0);return l("div",{className:"px-10 py-10 flex flex-col justify-between height-screen",children:[e(Ue,{storyName:(j=m==null?void 0:m.currentEstimation)==null?void 0:j.storyName,users:f,isVoting:u,votes:d}),e(We,{reveal:g,startVoting:h,isVoting:u}),e(qe,{isVoting:u,estimate:b}),e(_e,{isOpen:s,setIsOpen:n,setUsername:i}),e(Ge,{isOpen:r,setIsOpen:a,reveal:v})]})}var Ke="/plan-that-shit/assets/sadface.482226c5.gif";function Qe(){return l("div",{className:"flex flex-col items-center justify-center",children:[l("div",{children:[e("img",{className:"h-80 ml-auto mr-auto",src:Ke,alt:"sad computer"}),l("code",{className:"font-semibold text-gray-700 text-2xl",children:["{ status: 500,",e("br",{}),"message: &quotServer Error&ldquo }"]})]}),e("p",{className:"text-gray-500 mt-6",children:"This is a bad request. Please try again later."})]})}const Xe=t=>de(t).format("h:mm:ss A. MMM D");function Ze({className:t}){const[s,n]=c.exports.useState(Date.now());return c.exports.useEffect(()=>{const r=setInterval(()=>n(Date.now()),1e3);return()=>clearInterval(r)}),e("span",{className:t,children:Xe(new Date(s))})}function et(){return l("div",{className:"shadow-lg px-12 py-2 flex justify-between items-center bg-white",children:[e(ue,{to:"/",className:"text-4xl text-blue-400 font-bold",children:"Plan That Shit"}),l("div",{className:"flex items-center gap-4",children:[e(Ze,{className:"text-gray-400 font-semibold"}),e("button",{children:e(me,{color:"gray",size:30})})]})]})}function tt(){return l(he,{basename:"/plan-that-shit",children:[e(pe,{position:"bottom-right"}),e(et,{}),l(fe,{children:[e(O,{exact:!0,path:"/",element:e(Re,{})}),e(O,{exact:!0,path:"/:roomId",element:e(Ye,{})}),e(O,{path:"*",element:e(Qe,{})})]})]})}V.setAppElement("#root");xe.render(e(ge.StrictMode,{children:e(tt,{})}),document.getElementById("root"));
