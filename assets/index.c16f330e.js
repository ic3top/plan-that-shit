var Y=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var F=(t,a,r)=>a in t?Y(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,y=(t,a)=>{for(var r in a||(a={}))j.call(a,r)&&F(t,r,a[r]);if(I)for(var r of I(a))$.call(a,r)&&F(t,r,a[r]);return t},S=(t,a)=>K(t,Q(a));var B=(t,a)=>{var r={};for(var n in t)j.call(t,n)&&a.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&I)for(var n of I(t))a.indexOf(n)<0&&$.call(t,n)&&(r[n]=t[n]);return r};import{r as c,a as V,j as E,c as k,R as P,u as z,I as A,b as X,t as N,d as Z,e as ee,B as te,f as re,A as ne,n as ae,l as se,G as oe,g as le,M as ie,h as D,i as ce,k as de,L as ue,m as me,o as he,T as pe,p as fe,q as O,s as xe,v as ge}from"./vendor.f0c9d95d.js";const be=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};be();const ve=(t,a={})=>{const[r,n]=c.exports.useState({data:null,error:null,isLoading:!1}),s=c.exports.useCallback(()=>{n(o=>S(y({},o),{isLoading:!0})),V.post(t,a).then(o=>{n({data:o.data,isLoading:!1,error:null})}).catch(o=>{n({data:null,isLoading:!1,error:o})})},[t,a]);return[r,s]},e=E.exports.jsx,l=E.exports.jsxs,w=E.exports.Fragment;function x(d){var u=d,{onClick:t,children:a,outline:r,base:n,className:s,disabled:o,withIcon:i,bordered:h}=u,p=B(u,["onClick","children","outline","base","className","disabled","withIcon","bordered"]);const v=k("px-10 py-2 font-medium border-2 tracking-wider duration-150",{"text-white hover:shadow-lg border-blue-400 bg-blue-400 drop-shadow-md rounded":n,"bg-transparent border-transparent drop-shadow-none text-blue-400 hover:text-blue-600":r,"flex justify-center items-center gap-2":i,"border-blue-400 border-2 rounded text-blue-400 font-bold mt-6 hover:text-blue-500 hover:border-blue-500":h});return e("button",S(y({},p),{onClick:t,className:`${v} ${s}`,disabled:o,children:a}))}function q({className:t}){return e("div",{className:`${t} flex justify-center`,children:e("div",{className:"dot-elastic"})})}function C({isOpen:t,actions:a,title:r,message:n,content:s}){return e("div",{children:l(P,{isOpen:t,htmlOpenClassName:"overflow-y-hidden",contentLabel:"New room created",className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md fixed bottom-1/2 right-1/2 translate-y-1/2 translate-x-1/2 max-w-[500px]",overlayClassName:"fixed top-0 bottom-0 right-0 left-0 bg-gray-200 bg-gray-200/[.7]",children:[l("div",{className:"px-4",children:[r&&e("h2",{className:"text-2xl font-bold text-gray-700 mt-2",children:r}),n&&e("p",{className:"mt-4 text-lg text-gray-500",children:n})]}),s,e("div",{className:"bg-gray-300 h-px mt-6"}),e("div",{className:"flex justify-end",children:a})]})})}function Ne({isOpen:t,setIsShown:a,roomId:r,loading:n}){const s=z(),o=`${window.location.origin}/plan-that-shit/${r}`;return e(C,{isOpen:t,title:"Room created!",message:"Your room link created, now send it to all of your team members to invite them. Also, you might want to save it for the future.",content:n?e(q,{className:"mt-6 py-2"}):l("div",{className:"relative mt-6",onClick:()=>{N.promise(navigator.clipboard.writeText(o),{pending:"Coping...",success:"Copied to clipboard \u{1F44C}",error:"Rejected \u{1F92F}"})},children:[e("div",{className:"py-2 pl-4 pr-8 bg-blue-50 hover:bg-blue-100 text-lg cursor-read overflow-x-auto whitespace-nowrap",children:o}),e("button",{"aria-label":"copy to clipboard",className:"absolute right-2 top-3",children:e(X,{size:22})})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>a(!1),children:"CANCEL"}),l(x,{withIcon:!0,outline:!0,onClick:()=>s(`/${r}`),disabled:n,children:["JOIN",e(A,{size:24})]})]})})}const we="qwertyuiopasdfghjklzxcvbnm",ye=Z(we,12),Se=()=>ye().match(/.{1,3}/g).join("-");var f="/plan-that-shit/assets/card.f711e6a7.svg";function Ce(){return e("div",{className:"v-area",children:l("ul",{className:"v-circles",children:[e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})}),e("li",{children:e("img",{src:f,alt:"card"})})]})})}function Ie({value:t,onChange:a}){return e(ee,{mask:"aaa-aaa-aaa-aaa",value:t,onChange:a,placeholder:"xxx-xxx-xxx-xxx",children:r=>e("input",S(y({},r),{id:"roomId",className:"w-80 pt-2 pl-1 pr-4 rounded-sm border-b-2 text-lg focus:border-blue-400"}))})}function Re(){var h;const t=z(),[a,r]=c.exports.useState(!1),[n,s]=c.exports.useState(""),[o,i]=ve(`https://planning-poker-1479.herokuapp.com/api/room/${Se()}`);return l(w,{children:[l("div",{children:[e(Ne,{isOpen:a,setIsShown:r,roomId:(h=o==null?void 0:o.data)==null?void 0:h.roomId,loading:o.isLoading}),l("div",{className:"mt-16 pl-12 flex flex-col justify-between",style:{height:"75vh"},children:[l("div",{children:[l("ul",{children:[l("li",{className:"text-3xl font-medium flex items-center gap-4",children:[e(te,{color:"#2196F3",size:30}),"Play online anywhere with your team"]}),l("li",{className:"text-3xl font-medium mt-8 flex items-center gap-4",children:[e(re,{color:"#2196F3",size:30}),"Set up room in Seconds"]}),l("li",{className:"text-3xl font-medium mt-8 flex items-center gap-4",children:[e(ne,{color:"#2196F3",size:30}),"Estimate as an Expert"]})]}),e(x,{base:!0,className:"w-80 mt-8 ml-8 text-xl",onClick:()=>{i(),r(!0)},children:"Create New Room"})]}),l("div",{className:"flex flex-col ml-8 mt-20",children:[e("label",{htmlFor:"roomId",className:"text-sm text-gray-500",children:"Already have a room?"}),e(Ie,{value:n,onChange:p=>s(p.target.value)}),l(x,{withIcon:!0,base:!0,className:"w-80 mt-2 text-xl",onClick:()=>t(`/${n}`),children:["Join",e(A,{size:24})]})]})]})]}),e(Ce,{})]})}const Ee="notification",ke="users",Ae="connection",Oe="estimation:done",Me="error",Le="exception",Te="room",je="join",$e="estimate",Fe="reveal",Be="start",R={JOIN:je,ESTIMATE:$e,REVEAL:Fe,START:Be},M={NOTIFICATION:Ee,USERS:ke,ROOM:Te,ESTIMATION_DONE:Oe,CONNECTION:Ae,ERROR:Me,EXCEPTION:Le};function J({t,title:a,description:r}){return l("div",{className:`${t.visible?"animate-enter":"animate-leave"} max-w-md w-full bg-white shadow-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`,children:[e("div",{className:"flex-1 w-0 p-4",children:e("div",{className:"flex items-start",children:l("div",{className:"ml-3 flex-1",children:[e("p",{className:"text-lg font-medium text-gray-900",children:a}),e("p",{className:"mt-1 text-sm text-gray-500",children:r})]})})}),e("div",{className:"flex border-l border-gray-200",children:e("button",{onClick:()=>N.dismiss(t.id),className:"w-full rounded-none p-4 flex items-center justify-center text-sm font-medium text-blue-600 hover:bg-gray-100 focus:outline-none",children:"Close"})})]})}const Ve="https://planning-poker-1479.herokuapp.com",Pe=(t,a)=>{const[r,n]=c.exports.useState([]),[s,o]=c.exports.useState([]),[i,h]=c.exports.useState({}),[p]=c.exports.useState(ae(8)),d=c.exports.useRef(null);c.exports.useEffect(()=>{if(!(!a||!t))return d.current=se(Ve,{transports:["websocket"],query:{roomId:t,username:a,userId:p}}),d.current.on(M.ROOM,m=>{var b;h(m),o(((b=m.currentEstimation)==null?void 0:b.votes)||[])}),d.current.on(M.NOTIFICATION,m=>{N.custom(b=>e(J,{t:b,title:m.title,description:m.description}))}),d.current.on(M.USERS,n),d.current.emit(R.JOIN,{username:a,userId:p}),N.custom(m=>e(J,{t:m,title:"Connected",description:l(w,{children:["Connected to",e("span",{className:"tracking-wider font-medium p-1",children:t}),". Happy planning \u{1F389}"]})})),()=>{d.current.disconnect()}},[t,a]);const u=m=>{d.current.emit(R.ESTIMATE,{points:m,userId:p})},v=()=>{d.current.emit(R.REVEAL,{votes:s,storyName:d.current.storyName})},g=(m="Story name...")=>{d.current.emit(R.START,{storyName:m}),d.current.storyName=m};return{users:r,votes:s,isVoting:i.estimationInProgress,room:i,performEstimation:u,reveal:v,startVoting:g}};function U({children:t,onClick:a,dashed:r,selected:n}){const s=k("planning-card",{"planning-card_dashed":r,"planning-card_selected":n});return e("button",{onClick:a,className:s,children:t})}const ze=t=>t>0&&t<100;function De({isOpen:t,setIsOpen:a,onSave:r}){const[n,s]=c.exports.useState("");return e(C,{isOpen:t,title:"Create new planning card",message:"You will be able to to use that card after saving to estimate stories in the future.",content:l("form",{id:"points-form",onSubmit:i=>{i.preventDefault(),r(n),s("")},children:[e("div",{className:"px-4 mt-4 flex items-center justify-center h-44 w-36 rounded bg-blue-400 mr-auto ml-auto shadow-md",children:e("input",{value:n,onChange:i=>s(i.target.value),id:"points",type:"number",max:100,min:0,className:"w-full text-8xl font-medium bg-blue-400 text-white"})}),e("label",{htmlFor:"points",className:"text-gray-400 font-semibold block text-center mt-1",children:"Input integer between 0 and 100"})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>a(!1),children:"CANCEL"}),l(x,{type:"submit",form:"points-form",withIcon:!0,outline:!0,disabled:!ze(n),children:["SAVE",e(oe,{size:24})]})]})})}const _=(t,a)=>{const[r,n]=c.exports.useState(()=>{const s=localStorage.getItem(t);return s?JSON.parse(s):a});return c.exports.useEffect(()=>{const s=JSON.stringify(r);localStorage.setItem(t,s)},[r]),[r,n]},L=[0,1,2,3,5,8,13];function qe({isVoting:t,estimate:a}){const[r,n]=_("planning-cards",L),[s,o]=c.exports.useState(!1),[i,h]=c.exports.useState(null),p=u=>{if(t){a(u),h(u);return}N.error("Wait till voting begin")};return c.exports.useEffect(()=>{h(null)},[t]),l("div",{className:"mt-4",children:[e(De,{isOpen:s,setIsOpen:o,onSave:u=>(o(!1),r.includes(Number(u))?N.error(`Card with ${u} already exists`):(n(v=>{const g=[...v,Number(u)];return g.sort((m,b)=>m-b),g}),N.success(`Card with ${u} was added`)))}),e("h2",{className:"text-left font-semibold text-xl text-gray-600",children:t?"Choose your card...":"Wait till voting begins"}),l("div",{className:"flex gap-5 mt-2 flex-wrap",children:[Array.from(r).map(u=>e(U,{selected:u===i,onClick:()=>p(u),children:e("span",{className:"text-white text-4xl font-medium",children:u})},u)),e(U,{onClick:()=>o(!0),dashed:!0,children:e("span",{className:"text-blue-400 text-7xl font-medium pb-3",children:"+"})})]}),L.length!==r.length&&l(x,{onClick:()=>n(L),withIcon:!0,bordered:!0,children:["Refresh cards"," ",e(le,{size:24})]})]})}function Je({name:t,votes:a,isVoting:r}){const n=a.find(({user:o})=>o===t),s=k("border-4 w-full rounded-md border-blue-400 h-full flex items-center justify-center",{"bg-blue-400":n&&r,"bg-blue-400 text-3xl text-white font-bold":!r});return l("div",{className:"flex flex-col justify-center items-center",children:[l("div",{className:s,children:[r&&n&&e(ie,{color:"white",size:80}),r&&!n&&e(q,{}),!r&&n&&n.points,!r&&!n&&"?"]}),e("span",{className:"user-name",children:t})]})}function Ue({users:t,votes:a,isVoting:r,storyName:n}){return l("div",{className:"app-board",children:[e("div",{className:"app-story-block bg-blue-400 rounded-md text-white font-bold text-3xl flex items-center justify-center p-2",children:e("h2",{children:n||"Start voting"})}),t.map(({name:s,id:o})=>e(Je,{name:s,isVoting:r,votes:a},o))]})}const G=t=>/[`@#$%^&*()+\-=\[\]{};':"\\|<>\/~]/.test(t);function _e(t){const[a,r]=c.exports.useState({data:null,error:null,isLoading:!1});return[a,()=>(r(s=>S(y({},s),{isLoading:!0})),V.get(t).then(s=>(r({data:s.data,isLoading:!1,error:null}),s.data)).catch(s=>{r({data:null,isLoading:!1,error:s})}))]}function Ge({isOpen:t,setIsOpen:a,setUsername:r}){const[n,s]=_("username"," "),[o,i]=c.exports.useState(""),{roomId:h}=D(),[p,d]=_e(`https://planning-poker-1479.herokuapp.com/api/room/${h}?username=${n}`);return e(C,{isOpen:t,title:"What's your name?",message:"This name will be shown for all people in the room that you are trying to join. It is required.",content:l("div",{className:"flex flex-col items-center",children:[e("form",{id:"username-form",onSubmit:g=>{if(g.preventDefault(),!n)return i("Name is required.");if(n.length<3)return i("At least 4 characters.");if(n.length>15)return i("No more than 15 characters allowed.");if(G(n))return i("Special characters are not allowed, use only letters and/or numbers.");d().then(m=>{var b;if(m.username)return i(`${(b=m.username)==null?void 0:b.name} already in room, change your name`);r(n),a(!1)})},children:e("input",{className:`w-80 mt-4 rounded-sm border-b-2 text-lg${o?" border-red-400":" focus:border-blue-400"}`,type:"text",value:n,onChange:g=>s(g.target.value),placeholder:"MyName..."})}),e("span",{className:"text-sm text-red-400",children:p.isLoading?"Looking for similar name inside the room...":o})]}),actions:l(x,{type:"submit",form:"username-form",autoFocus:!0,withIcon:!0,base:!0,className:"w-full rounded-none rounded-b-lg hover:text-gray-200 text-xl",children:["Join",e(A,{size:24})]})})}function He({isOpen:t,setIsOpen:a,startVoting:r}){const[n,s]=c.exports.useState(""),[o,i]=c.exports.useState("");return e(C,{isOpen:t,title:"Story name",message:"Provide the next story name to vote for.",content:l("div",{className:"flex flex-col items-center py-4 px-16",children:[e("form",{id:"name-form",onSubmit:d=>{if(d.preventDefault(),!n)return i("Name is required.");if(n.length<3)return i("At least 4 characters.");if(n.length>50)return i("No more than 50 characters allowed.");if(G(n))return i("Special characters are not allowed, use only letters and/or numbers.");r(n),s(""),a(!1)},children:e("input",{className:`w-80 mt-4 rounded-sm border-b-2 text-lg${o?" border-red-400":" focus:border-blue-400"}`,type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Story Name..."})}),e("span",{className:"text-sm text-red-400",children:o})]}),actions:l(w,{children:[e(x,{outline:!0,onClick:()=>a(!1),children:"Cancel"}),e(x,{type:"submit",form:"name-form",withIcon:!0,outline:!0,children:"Start Voting"})]})})}function We({reveal:t,startVoting:a,isVoting:r}){const[n,s]=c.exports.useState(!1);return l(w,{children:[e(He,{isOpen:n,setIsOpen:s,startVoting:a}),r?e(x,{bordered:!0,onClick:t,className:"w-1/2 mx-auto",children:"REVEAL"}):e(x,{bordered:!0,onClick:()=>s(!0),className:"w-1/2 mx-auto",children:"Start Voting"})]})}function Ye({isOpen:t,setIsOpen:a,reveal:r}){return e(C,{isOpen:t,title:l("span",{className:"flex items-center gap-2 text-yellow-500",children:[e(ce,{size:28})," ","Not everyone voted"]}),message:"Be aware, not everyone voted. Their estimates will not be taken into account and will be represented as '?' - question mark.",actions:l(w,{children:[e(x,{outline:!0,onClick:()=>a(!1),children:"Cancel"}),e(x,{outline:!0,onClick:()=>{a(!1),r()},children:"Reveal anyway"})]})})}function Ke(){var T;const{roomId:t}=D(),[a,r]=c.exports.useState(!0),[n,s]=c.exports.useState(!1),[o,i]=c.exports.useState(""),{room:h,users:p,votes:d,isVoting:u,performEstimation:v,reveal:g,startVoting:m}=Pe(t,o),b=()=>p.every(({name:H})=>d.some(W=>W.user===H))?g():s(!0);return l("div",{className:"px-10 py-10 flex flex-col justify-between height-screen",children:[e(Ue,{storyName:(T=h==null?void 0:h.currentEstimation)==null?void 0:T.storyName,users:p,isVoting:u,votes:d}),e(We,{reveal:b,startVoting:m,isVoting:u}),e(qe,{isVoting:u,estimate:v}),e(Ge,{isOpen:a,setIsOpen:r,setUsername:i}),e(Ye,{isOpen:n,setIsOpen:s,reveal:g})]})}var Qe="/plan-that-shit/assets/sadface.482226c5.gif";function Xe(){return l("div",{className:"flex flex-col items-center justify-center",children:[l("div",{children:[e("img",{className:"h-80 ml-auto mr-auto",src:Qe,alt:"sad computer"}),l("code",{className:"font-semibold text-gray-700 text-2xl",children:["{ status: 500,",e("br",{}),"message: &quotServer Error&ldquo }"]})]}),e("p",{className:"text-gray-500 mt-6",children:"This is a bad request. Please try again later."})]})}const Ze=t=>de(t).format("h:mm:ss A. MMM D");function et({className:t}){const[a,r]=c.exports.useState(Date.now());return c.exports.useEffect(()=>{const n=setInterval(()=>r(Date.now()),1e3);return()=>clearInterval(n)}),e("span",{className:t,children:Ze(new Date(a))})}function tt(){return l("div",{className:"shadow-lg px-12 py-2 flex justify-between items-center bg-white",children:[e(ue,{to:"/",className:"text-4xl text-blue-400 font-bold",children:"Plan That Shit"}),l("div",{className:"flex items-center gap-4",children:[e(et,{className:"text-gray-400 font-semibold"}),e("button",{children:e(me,{color:"gray",size:30})})]})]})}function rt(){return l(he,{basename:"/plan-that-shit",children:[e(pe,{position:"bottom-right"}),e(tt,{}),l(fe,{children:[e(O,{exact:!0,path:"/",element:e(Re,{})}),e(O,{exact:!0,path:"/:roomId",element:e(Ke,{})}),e(O,{path:"*",element:e(Xe,{})})]})]})}P.setAppElement("#root");xe.render(e(ge.StrictMode,{children:e(rt,{})}),document.getElementById("root"));
